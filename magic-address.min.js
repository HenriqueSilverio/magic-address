/*! magic-address - 2.0.0 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).MagicAddress=e()}(this,(function(){"use strict";return{DEFAULTS:{API:"https://api.postmon.com.br/v1/cep",selectors:{inputCEP:".js-input-cep",inputAddress:".js-input-address",inputNumber:".js-input-number",inputNeighborhood:".js-input-neighborhood",inputCity:".js-input-city",inputState:".js-input-state"}},start(t={}){return this.settings=Object.assign({},this.DEFAULTS,t),this._setupElements()._bindEvents(),this},_setupElements(){let t=null;const e=this.settings.selectors;for(t in this.elements={},e)e.hasOwnProperty(t)&&(this.elements[t]=document.querySelector(e[t]));return this},_bindEvents(){return this.elements.inputCEP.addEventListener("blur",this.getAddress.bind(this)),this},_queryAPI(t){return new Promise(((e,s)=>{const n=new XMLHttpRequest;n.open("GET",`${this.settings.API}/${t}`),n.addEventListener("load",(()=>{4===n.readyState&&200===n.status?e(JSON.parse(n.response)):s(Error(n.statusText))})),n.addEventListener("error",(()=>{s(Error("Unknown Network Error"))})),n.send()}))},getAddress(t){const e=t.target.value.replace(/\D/g,"");if(e&&/^[0-9]{8}$/.test(e))return this._queryAPI(e).then(this.fillForm.bind(this)).catch(this.clearForm.bind(this)),this;this.clearForm()},fillForm(t){const e=this.elements;return e.inputAddress.value=t.logradouro||"",e.inputNeighborhood.value=t.bairro||"",e.inputCity.value=t.cidade,e.inputState.value=t.estado,this},clearForm(){let t=null;const e=this.elements;for(t in e)e.hasOwnProperty(t)&&(e[t].value="");return this}}}));
//# sourceMappingURL=magic-address.min.js.map
